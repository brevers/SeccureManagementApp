<div class="container">
  <p style="color: green"><%= notice %></p>

  <%= render @project %>

  <div>
    <%= link_to "Edit", edit_project_path(@project) %> |
    <%= link_to "Back Projects", projects_path %>

    <%= button_to "Destroy", @project, method: :delete %>
  </div>

  <hr>

  <% if @project.tasks.any? %>
    <h1>Listing tasks</h1>
    <table class="table">
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Status</th>
        <th>Project</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>

      <% @project.tasks.each do |task| %>
        <% if task.persisted? %>
          <tr>
            <td><%= task.name %></td>
            <td><%= task.description %></td>
            <td><%= task.status %></td>
            <td><%= task.project.name %></td>
            <td><%= link_to 'Show', [task.project, task] %></td>
            <td><%= link_to 'Edit', edit_project_task_path(task.project, task) %></td>
            <td><%= link_to 'Destroy', [task.project, task],
                    data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}
                %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </table>
  <% end %>

  <h1>New task</h1>
    <%= render 'tasks/form' %>
  <hr>

</div>
